<!DOCTYPE html>
<html>
    <head>
        <title>Floor is Lava</title>
        <link href="./style.css" rel="stylesheet"></link>
    </head>

    <body>
        <canvas id="canv"></canvas>
        


        <script type="module">
            "use strict"

            import {getCanvas} from "./engine/scripts.js";
            import Time from "./engine/Time.js";
            import GameObject from "./engine/GameObject.js";
            import Component from "./engine/Component.js";
            import Input from "./engine/Input.js";

            import FloorDrawComponent from "./floor_is_lava/FloorDrawComponent.js";
            import FloorGameObject from "./floor_is_lava/FloorGameObject.js";
            import FloorUpdateComponent from "./floor_is_lava/FloorUpdateComponent.js";

            import ElevatorDrawComponent from "./floor_is_lava/ElevatorDrawComponent.js";
            import ElevatorGameObject from "./floor_is_lava/ElevatorGameObject.js";
            import ElevatorUpdateComponent from "./floor_is_lava/ElevatorUpdateComponent.js";

            import LavaDrawComponent from "./floor_is_lava/LavaDrawComponent.js";
            import LavaGameObject from "./floor_is_lava/LavaGameObject.js";
            import LavaUpdateComponent from "./floor_is_lava/LavaUpdateComponent.js";

            import RectangleDrawComponent from "./floor_is_lava/RectangleDrawComponent.js";
            import RectangleGameObject from "./floor_is_lava/RectangleGameObject.js";
            import RectangleUpdateComponent from "./floor_is_lava/RectangleUpdateComponent.js";
            
            Input.attach(document);

            let {canvas, ctx} = getCanvas();

            let x = ctx.canvas.width / 2 - 50;
            let y = ctx.canvas.height / 2 - 50;
            let width = 50;
            let height = 50;
            let onGround = false;
            let jumpTime = 0;



            let gameObjects = [];




            gameObjects.push(new FloorGameObject(0, ctx.canvas.height - 50, ctx.canvas.width, 50));

            gameObjects.push(new LavaGameObject(100, ctx.canvas.height - 50, 250, 50));
            gameObjects.push( new LavaGameObject(400, ctx.canvas.height - 50, 350, 50));


            gameObjects.push(new ElevatorGameObject(ctx.canvas.width - 100, ctx.canvas.height - 75, 100, 10, ctx.canvas.width - 50, 0));

            gameObjects.push(new RectangleGameObject(0, ctx.canvas.height - 100, width, height, onGround, jumpTime));

            
            



            

            function tick() {
                Input.update();
                update();
                draw();
                ctx.font = "30px Arial";
                ctx.fillText("Welcome to Floor is Lava", ctx.canvas.width / 2 - 150, 50);
                ctx.fillText("Time: " + parseInt(Time.timePassed), ctx.canvas.width / 2, 100)

                Time.timePassed += Time.secondsBetweenFrame;
            }

            //Calls individual object's update function.
            function update() {
                for (let rectangle of gameObjects) {
                    rectangle.update();
                }
                
            }

            //Calls the individual object's draw function.
            function draw() {
                ctx.fillStyle = "black";
                ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);

                for (let rectangle of gameObjects) {
                    rectangle.draw(ctx);
                }
            
                

                
            }


            setInterval(tick, Time.millisecondsBetweenFrames);
        </script>
    </body>
</html>
